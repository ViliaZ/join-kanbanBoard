<div class="addNewBoard">
    <button (click)="addNewBoard()"> New Board</button>
    <input [(ngModel)]="newBoardTitle" type="text">
</div>

<div *ngIf="doublicateAlert && !deleteBoardAlert" class="alertbox" >
    <img src="assets/img/alert.png" alt="alert">
    Board name already exists. Please choose another title.
</div>

<div *ngIf="deleteBoardAlert && !doublicateAlert" class="alertDelete">
    <img src="assets/img/alert.png" alt="alert">
    Do you really want to delete the board with all belonging tasks?
    <button (click)="confirmDelete()">Confirm</button>
    <button (click)="deleteBoardAlert = false">Cancel</button>
</div>

<div [class.blurOverlay]="taskservice.taskPopupOpen" class="body-board">

    <div *ngFor="let board of db.boards; index as i" class="board">
    
        <!-- for Inputarea: (blur)="exitEditMode(i,$event)"-->

        <!-- column header -->
        <div class="headColumn" >
            <input #boardTitle  [(ngModel)]="board.name" [disabled]="!board.editable" (click)="stopPropagation($event)">
            <img *ngIf="board.editable" (click)="saveBoardTitle(board.name, board.customIdName, i)"
                src="assets/img/save.png" class="iconEdit">
            <img *ngIf="!board.editable" (click)="enterEditMode(i)" src="assets/img/edit.png" class="iconEdit">
            <img *ngIf="!board.editable" (click)="deleteBoard(i,$event)" src="assets/img/delete.png" class="iconEdit">

        </div>

        <div class="wrapperTickets" id="{{board.name}}" (drop)="drop($event, board.name)"
            (dragover)="allowDrop($event)">

            <!-- SINGLE TASK (dynamic) Note: customIdName is set from DB Firestore at subscribe -->
            <app-task 
                *ngFor="let task of board.tasks; index as i"
                id="{{task.customIdName}}" 
                [task]="task"
                draggable="true" 
                (dragstart)="drag($event)" 
                (click)="editTask(task)"
            >
            </app-task>

            <!-- EMPTY TASK plaecholder (static) -->
            <div class="ticketWrapPlaceholder" (click)="openTaskPopUp()">
                <div class="singleTicket plaecholderTicket">
                    <div class="title">New Task</div>
                    <div class="urgency"></div>

                    <div class="information">
                        <div class="user">+</div>
                        <div class="date">Date</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>