
<div (click)="editTask(task, $event)" class="ticketWrap">

    <div class="singleTicket">

        <div class="first-row">
            <div 
                class="dueTo"
                [matTooltip]="'Due Date'"
                [matTooltipPosition]="'above'">
                <!-- <img src="assets/img/bell.png" alt="due to"> -->
                {{ task.dueTo | date: 'mediumDate' }}
            </div>
            <div class="title">{{ task.title}}</div>

            <img 
                class="icon-delete" 
                src="assets/img/delete.png" 
                (click)="deleteTask(task, $event)"
                [matTooltip]="'Delete task'"
                [matTooltipPosition]="'above'">

            <!-- PIN ICON -->
            <img 
                class="icon-pin" 
                src="assets/img/pin-filled.png" 
                (click)="fixTaskToTop(task, $event)"
                [class.pinRotation]="task.isPinnedToBoard"
                [matTooltip]="'Fix task on top of the board'"
                [matTooltipPosition]="'above'">


            <img 
                *ngIf="task.isPinnedToBoard" 
                class="icon-pin-fixed" 
                src="assets/img/pin-filled.png"
                [class.pinRotation]="task.isPinnedToBoard"
                [matTooltip]="'Remove fixation'"
                [matTooltipPosition]="'above'">
        </div>

        <div class="secondRow">
            <div 
                class="urgency {{task.urgency}}"
                [matTooltip]="'Urgency'"
                [matTooltipPosition]="'right'">
                {{ task.urgency }}
            </div>
            <img 
                src="assets/img/user.svg" 
                alt="userImage"
                >
        </div>

        <div class="thirdRow" >
            <div class="progress" *ngIf="task.checkedTodos.length > 0 || task.uncheckedTodos.length > 0; else emptyChecklist">
                <div class="barWrapper concave">
                    <div class="progressBar" [ngStyle]="{'width': task.percentCheckedTodos+'%'}"></div>
                </div>                
                <div class="todos"> {{ task.checkedTodos.length }} / {{ task.allTodos }} done</div>
            </div>

            <ng-template #emptyChecklist>
                <div>No Checklist items</div>
            </ng-template>
        </div>

    </div>


    <!-- category -->
    <div class="category">
        {{ task.category | titlecase }}
    </div>
</div>